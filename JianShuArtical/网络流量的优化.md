##网络流量的优化

>压缩数据

服务端对于返回大于1KB的数据应进行压缩。

    开启gzip压缩的流程如下：
    1. 在请求头中添加 Accept-Encoding : gizp
    2. 服务端检查请求是否要求进行gzip压缩，有的话则执行压缩，并在response头中添加
       content-encoding:gizp
    3. 客户端如果发现数据是经过gzip压缩后则进行数据的解压。

> 减少网络访问次数

能调用一次API获取的数据，就不要调用两次
    
> 使用TCP协议

由于TCP使用的是长连接，而Http使用的是无状态短连接。TCP的速度是远远快于Http的。但缺点是一台服务器能支持的长连接个数不多，所以需要更多的服务器集成。
    
> 建立网络请求取消机制

一个界面如果没有请求完网络数据，在跳转到另一个界面之前，要把之前的网络请求都取消，不再等待，也不再接收数据。

>增加重试机制

如果API是严格遵守RESTful风格，可以为所以的get请求配置重试机制，比如get请求失败后重试3次。post请求由于一般都用来提交数据，所以不适合添加重试机制。

>摘抄自《App研发录》

        

